<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Countdown 1â€“60</title>

  <style>
    :root{
      --bg:#000;
      --gold:#d4af37;
      --border:rgba(212,175,55,.45);
    }

    *{ box-sizing:border-box; }

    html,body{
      height:100%;
      margin:0;
      background:var(--bg);
      color:var(--gold);
      font-family:Arial,system-ui,sans-serif;
    }

    .wrap{
      position: relative;
      height:100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap: 3vh;
      padding: 4vh 4vw;
      user-select:none;
    }

    /* ===== LOGO ===== */
    .logo{
      position:absolute;
      top:3vh;
      left:50%;
      transform:translateX(-50%);
      max-width:60vw;
      max-height:30vh;
      object-fit:contain;
      filter: drop-shadow(0 0 22px rgba(212,175,55,0.35));
    }

    .time{
      font-variant-numeric: tabular-nums;
      font-weight: 900;
      letter-spacing: .06em;
      font-size: min(22vw, 28vh);
      line-height: 1;
      text-shadow: 0 0 30px rgba(212,175,55,0.22);
    }

    .pickerRow{
      display:flex;
      align-items:center;
      gap: 2vw;
      font-size: min(4.6vw, 4.6vh);
      font-weight: 900;
    }

    select{
      font-size: min(4.6vw, 4.6vh);
      font-weight: 900;
      padding: 1.2vh 2vw;
      border-radius: 16px;
      border: 2px solid var(--border);
      background: rgba(0,0,0,0.35);
      color: var(--gold);
      outline: none;
    }

    .btnRow{
      display:flex;
      gap: 2vw;
      flex-wrap:wrap;
      justify-content:center;
    }

    button{
      font-size: min(4.2vw, 4.2vh);
      font-weight: 900;
      padding: 1.2vh 2.2vw;
      border-radius: 16px;
      border: 2px solid var(--border);
      background: rgba(0,0,0,0.35);
      color: var(--gold);
      cursor:pointer;
    }

    button:active{ transform: translateY(1px); }
    button:disabled{ opacity:.5; cursor:not-allowed; }

    .hint{
      position:fixed;
      left:0;
      right:0;
      bottom:2vh;
      text-align:center;
      opacity:.65;
      font-size: min(3.2vw, 3.2vh);
      padding:0 4vw;
    }

    .flash{ animation: flash 1s ease-in-out 3; }
    @keyframes flash{
      0%,100%{filter:none;}
      50%{filter:brightness(1.35);}
    }
  </style>
</head>

<body>

<audio id="alarm" preload="auto"
  src="signal-piercing-short-sound-of-a-siren.mp3"></audio>

<div class="wrap" id="wrap">

  <!-- LOGO -->
  <img src="wolf-solution-logo.png"
       alt="Wolf Solution GmbH Logo"
       class="logo">

  <div class="time" id="time">05:00</div>

  <div class="pickerRow">
    <span>Minuten</span>
    <select id="minutes"></select>
  </div>

  <div class="btnRow">
    <button id="startStop">Start</button>
    <button id="reset">Reset</button>
    <button id="fullscreen">Fullscreen</button>
  </div>

</div>

<div class="hint" id="hint"></div>

<script>
  const wrap = document.getElementById("wrap");
  const elTime = document.getElementById("time");
  const sel = document.getElementById("minutes");
  const btnStartStop = document.getElementById("startStop");
  const btnReset = document.getElementById("reset");
  const btnFull = document.getElementById("fullscreen");
  const alarm = document.getElementById("alarm");
  const hint = document.getElementById("hint");

  let selectedMinutes = 5;
  let totalSeconds = selectedMinutes * 60;
  let remainingSeconds = totalSeconds;
  let timerId = null;
  let soundUnlocked = false;

  const pad = (n) => String(n).padStart(2,"0");

  function render(){
    const mm = Math.floor(remainingSeconds/60);
    const ss = remainingSeconds%60;
    elTime.textContent = `${pad(mm)}:${pad(ss)}`;
    btnStartStop.textContent = timerId ? "Stop" : "Start";
    sel.disabled = !!timerId;
  }

  async function unlockSound(){
    if (soundUnlocked) return;
    try{
      alarm.currentTime = 0;
      await alarm.play();
      alarm.pause();
      alarm.currentTime = 0;
      soundUnlocked = true;
    }catch(e){}
  }

  function stopSound(){
    alarm.pause();
    alarm.currentTime = 0;
  }

  function setMinutes(mins){
    selectedMinutes = Math.max(1, Math.min(60, mins));
    totalSeconds = selectedMinutes * 60;
    remainingSeconds = totalSeconds;
    wrap.classList.remove("flash");
    stopSound();
    render();
  }

  function startStop(){
    if (timerId){
      clearInterval(timerId);
      timerId = null;
      render();
      return;
    }

    if (remainingSeconds <= 0) remainingSeconds = totalSeconds;

    timerId = setInterval(() => {
      remainingSeconds -= 1;
      if (remainingSeconds <= 0){
        remainingSeconds = 0;
        clearInterval(timerId);
        timerId = null;

        alarm.currentTime = 0;
        alarm.play().catch(()=>{});
        wrap.classList.add("flash");
      }
      render();
    }, 1000);

    render();
  }

  function reset(){
    if (timerId){ clearInterval(timerId); timerId = null; }
    stopSound();
    wrap.classList.remove("flash");
    remainingSeconds = totalSeconds;
    render();
  }

  for (let i=1;i<=60;i++){
    const opt = document.createElement("option");
    opt.value = String(i);
    opt.textContent = String(i);
    sel.appendChild(opt);
  }
  sel.value = String(selectedMinutes);

  sel.addEventListener("change", async () => {
    await unlockSound();
    setMinutes(Number(sel.value));
  });

  btnStartStop.addEventListener("click", async () => {
    await unlockSound();
    startStop();
  });

  btnReset.addEventListener("click", async () => {
    await unlockSound();
    reset();
  });

  btnFull.addEventListener("click", async () => {
    await unlockSound();
    if (!document.fullscreenElement){
      document.documentElement.requestFullscreen?.();
    } else {
      document.exitFullscreen?.();
    }
  });

  window.addEventListener("pointerdown", unlockSound, { once:true });

  render();
</script>

</body>
</html>

